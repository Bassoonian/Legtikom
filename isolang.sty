\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{isolang}
\RequirePackage{xstring}

\ProcessOptions\relax

%First argument is the ISO code/short form
\newcommand\SubStep[2]{\expandafter\StrSubstitute\expandafter{\apple}{#1}{#2}[\apple]}%

\newcommand\ISO[1]{%
    \noexpandarg%
    %input stuff
    \StrSubstitute{#1}{``}{"}[\apple]%
    \SubStep{''}{"}%
    \SubStep{#1}{\MakeLowercase{#1}}%
    %
    %Germanic
    \SubStep{pgmc}{Proto-Germanic}%
    \SubStep{ang}{Old English}%
    \SubStep{eng}{English}%
    \SubStep{dum}{Middle Dutch}%
    \SubStep{goh}{Old High German}%
    \SubStep{ger}{German}%
    \SubStep{non}{Old Norse}%
    %Romance
    \SubStep{lat}{Latin}%
    %Celtic
    \SubStep{sga}{Old Irish}%
    \SubStep{mga}{Middle Irish}%
    %Tocharian
    \SubStep{txb}{Tocharian B}%
    %Anatolian
    \SubStep{hit}{Hittite}%
    %Slavic
    \SubStep{chu}{Old Church Slavonic}%
    \SubStep{rus}{Russian}%
    %Baltic
    \SubStep{lit}{Lithuanian}%
    %Hellenic
    \SubStep{ell}{Ancient Greek}%
    \SubStep{grc}{Greek}%
    %Iranian
    \SubStep{ave}{Avestan}%
    %Indo-Aryan
    \SubStep{san}{Sanskrit}%
    %Other
    \SubStep{alb}{Albanian}%
}%

\endinput